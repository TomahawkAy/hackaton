<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="apple-touch-icon" sizes="76x76" href="../assets/img/apple-icon.png">
    <link rel="icon" type="image/png" href="../assets/img/favicon.png">
    <title>
        Mawalni
    </title>
    <!--     Fonts and icons     -->
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700" rel="stylesheet">
    <link href="https://use.fontawesome.com/releases/v5.0.6/css/all.css" rel="stylesheet">
    <!-- Nucleo Icons -->
    <link href="{{ asset('assets/css/nucleo-icons.css') }}" rel="stylesheet"/>
    <link href="{{ asset('assets/css/nucleo-svg.css') }}" rel="stylesheet"/>
    <!-- Font Awesome Icons -->
    <link href="{{ asset('assets/css/font-awesome.css') }}" rel="stylesheet"/>
    <link href="{{ asset('assets/css/nucleo-svg.css') }}" rel="stylesheet"/>
    <!-- CSS Files -->
    <link href="{{ asset('assets/css/argon-design-system.css') }}" rel="stylesheet"/>
</head>

<body class="register-page">

<div class="wrapper">
    <section class="section section-shaped section-lg">
        <div class="shape shape-style-1 bg-gradient-default">
            <span></span>
            <span></span>
            <span></span>
            <span></span>
            <span></span>
            <span></span>
            <span></span>
            <span></span>
        </div>
        <div class="container pt-lg-7">
            <div class="row justify-content-center">
                <div class="col-lg-5">
                    <div class="card bg-secondary shadow border-0">
                        <div class="card-body px-lg-5 py-lg-5">
                            <div class="text-center text-muted mb-4">
                                <small>Veuillez s'inscrire dans notre plateforme.</small>
                            </div>
                            <form role="form">
                                <div class="form-group">
                                    <div class="input-group input-group-alternative mb-3">
                                        <div class="input-group-prepend">
                                            <span class="input-group-text"><i class="ni ni-hat-3"></i></span>
                                        </div>
                                        <input class="form-control" placeholder="Nom complet" type="text"
                                               id="nom-complet">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="input-group input-group-alternative mb-3">
                                        <div class="input-group-prepend">
                                            <span class="input-group-text"><i class="ni ni-tie-bow"></i></span>
                                        </div>
                                        <input class="form-control" placeholder="Date naissance" type="date"
                                               id="birth-date">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="input-group input-group-alternative mb-3">
                                        <div class="input-group-prepend">
                                            <span class="input-group-text"><i class="ni ni-email-83"></i></span>
                                        </div>
                                        <input class="form-control" placeholder="email" type="email" id="email">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="input-group input-group-alternative mb-3">
                                        <div class="input-group-prepend">
                                            <span class="input-group-text"><i class="ni ni-user-run"></i></span>
                                        </div>
                                        <input class="form-control" placeholder="login" type="text" id="login">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="input-group input-group-alternative mb-3">
                                        <div class="input-group-prepend">
                                            <span class="input-group-text"><i class="ni ni-key-25"></i></span>
                                        </div>
                                        <input class="form-control" placeholder="mot de passe" type="password"
                                               id="password">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="input-group input-group-alternative mb-3">
                                        <div class="input-group-prepend">
                                            <span class="input-group-text"><i class="ni ni-user-run"></i></span>
                                        </div>
                                        <select class="form-control" id="choice" onchange="choiceHeld()">
                                            <option disabled>Veuillez choisire votre type de compte</option>
                                            <option value="professional">Compte professionel</option>
                                            <option value="Investisseur">Compte Investisseur</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="form-group professional">
                                    <div class="input-group input-group-alternative mb-3">
                                        <div class="input-group-prepend">
                                            <span class="input-group-text"><i class="ni ni-shop"></i></span>
                                        </div>
                                        <input class="form-control" placeholder="Nom de l'entreprise" type="text"
                                               id="enterprise-name">
                                    </div>
                                </div>
                                <div class="form-group professional">
                                    <div class="input-group input-group-alternative mb-3">
                                        <div class="input-group-prepend">
                                            <span class="input-group-text"><i class="ni ni-badge"></i></span>
                                        </div>
                                        <select class="form-control" id="enterprise-type">
                                            <option disabled>Veuillez choisire le type de votre entreprise</option>
                                            <option value="TPE">Tr√©s Petite Entreprise</option>
                                            <option value="store">Boutique</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="form-group professional">
                                    <div class="input-group input-group-alternative mb-3">
                                        <div class="input-group-prepend">
                                            <span class="input-group-text"><i class="ni ni-tag"></i></span>
                                        </div>
                                        <input class="form-control" placeholder="identifiant patente" type="text"
                                               id="pattent-id">
                                    </div>
                                </div>


                                <div class="text-center">
                                    <button type="button" class="btn btn-primary mt-4" onclick="createUser()">Create
                                        account
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
</div>
<script src="{{ asset('assets/js/core/jquery.min.js') }}" type="text/javascript"></script>
<script src="{{ asset('assets/js/core/popper.min.js') }}" type="text/javascript"></script>
<script src="{{ asset('assets/js/core/bootstrap.min.js') }}" type="text/javascript"></script>
<script src="{{ asset('assets/js/plugins/perfect-scrollbar.jquery.min.js') }}"></script>
<script src="{{ asset('assets/js/plugins/bootstrap-switch.js') }}"></script>
<script src="{{ asset('assets/js/plugins/nouislider.min.js') }}" type="text/javascript"></script>
<script src="{{ asset('assets/js/plugins/moment.min.js') }}"></script>
<script src="{{ asset('assets/js/plugins/datetimepicker.js') }}" type="text/javascript"></script>
<script src="{{ asset('assets/js/plugins/bootstrap-datepicker.min.js') }}"></script>
<script src="https://maps.googleapis.com/maps/api/js?key=YOUR_KEY_HERE"></script>
<script src="{{ asset('assets/js/argon-design-system.min.js') }}" type="text/javascript"></script>
<script src="https://cdn.trackjs.com/agent/v3/latest/t.js"></script>
{% block internalJs %}
    <script>

        function choiceHeld() {
            let choice = $('#choice').val();
            let professionals = $('.professional');
            switch (choice) {
                case "professional":
                    professionals.show();
                    break;
                case "Investisseur":
                    professionals.hide();
                    break;
                default:
                    break;
            }
        }

        function createUser() {
            let choice = $('#choice').val();
            if (choice === "professional") {

            } else {
                let user = {
                    fullName: $('#nom-complet').val(),
                    birthDate: $('#birth-date').val(),
                    email: $('#email').val(),
                    login: $('#login').val(),
                    password: $('#password').val()
                }
                const callback = (result) => {
                    const url = "{{ path('home') }}"
                    console.log(callback);
                    window.location.href = url;
                }
                makeAjaxCall('POST', 'json', user, "{{ path('newInvester') }}", callback);
            }
        }

        function makeAjaxCall(type, dataType, data, url, successCallback) {
            $.ajax({
                type: type,
                url: url,
                dataType: dataType,
                data: data,
                success: successCallback
            })
        }

    </script>
{% endblock %}
</body>

</html>